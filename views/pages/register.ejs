<%- include('../partials/head', { title }) %>
<%- include('../partials/nav') %>
<main class="container auth-page page-fade">
  <section class="auth-card">
    <h1 class="auth-title">Registracija</h1>

    <% if (errors && errors.length) { %>
      <ul class="auth-errors"><% errors.forEach(e => { %><li><%= e %></li><% }) %></ul>
    <% } %>

    <form class="auth-form" method="post" action="/register">
      <label class="auth-label">El. paštas</label>
      <input class="auth-input" type="email" name="email" value="<%= (values && values.email) || '' %>" required />

      <label class="auth-label">Slaptažodis</label>
      <input class="auth-input" type="password" name="password" required />

      <label class="auth-label">Pakartoti slaptažodį</label>
      <input class="auth-input" type="password" name="password2" required />

      <button class="auth-button" type="submit">Registruotis</button>
    </form>
    <div class="auth-switch">Jau turi paskyrą? <a href="/login">Prisijunk</a></div>
  </section>
</main>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const container = document.querySelector('.page-fade');
    if (container) requestAnimationFrame(() => container.classList.add('page-fade--in'));
  });
  document.addEventListener('click', (e) => {
    const a = e.target.closest('a');
    if (!a) return;
    const isAuthSwitch = a.matches('a[href="/login"], a[href="/register"]');
    if (!isAuthSwitch) return;
    const container = document.querySelector('.page-fade');
    if (!container) return;
    e.preventDefault();
    container.classList.remove('page-fade--in');
    container.classList.add('page-fade--out');
    setTimeout(() => { window.location.href = a.href; }, 180);
  });
</script>
<%- include('../partials/footer') %>
